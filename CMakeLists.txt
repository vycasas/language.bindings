cmake_minimum_required(VERSION 2.8 FATAL_ERROR)
project(Language_Bindings)

option(BUILD_C "Build C Library." ON)
option(BUILD_CXX "Build C++ wrapper." OFF)
option(BUILD_JAVA "Build Java wrapper." OFF)
if (NOT MSVC)
    option(BUILD_OBJC "Build Objective-C wrapper." OFF)
endif ()
if (MSVC)
    option(BUILD_DOTNET "Build .NET wrapper." OFF)
endif ()
option(BUILD_PYTHON "Build Python wrapper." OFF)
option(BUILD_RUBY "Build Ruby wrapper." OFF)
option(BUILD_HASKELL "Build Haskell wrapper." OFF)

if (NOT CMAKE_BUILD_TYPE OR "${CMAKE_BUILD_TYPE}" STREQUAL "")
    set(CMAKE_BUILD_TYPE "Release")
endif ()

set(CMAKE_ARCHIVE_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR})
set(CMAKE_LIBRARY_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR})
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR})

if (BUILD_C)
    add_subdirectory(${CMAKE_SOURCE_DIR}/c)
endif ()

if (BUILD_CXX)
    if (NOT BUILD_C)
        message(FATAL_ERROR "C++ wrapper requires building C library.")
        return ()
    endif ()
    add_subdirectory(${CMAKE_SOURCE_DIR}/cxx)
endif ()

if (BUILD_JAVA)
    if (NOT BUILD_CXX)
        message(FATAL_ERROR "Java wrapper requires building C library and C++ wrapper.")
        return ()
    endif ()
    add_subdirectory(${CMAKE_SOURCE_DIR}/java)
endif ()

if (BUILD_OBJC)
    if (NOT BUILD_CXX)
        message(FATAL_ERROR "Objective-C wrapper requires building C library and C++ wrapper.")
        return ()
    endif ()
    add_subdirectory(${CMAKE_SOURCE_DIR}/objc)
endif ()

if (BUILD_DOTNET)
    if (NOT BUILD_CXX)
        message(FATAL_ERROR ".NET wrapper requires building C library and C++ wrapper.")
        return ()
    endif ()
    add_subdirectory(${CMAKE_SOURCE_DIR}/dotnet)
endif ()

if (BUILD_PYTHON)
    if (NOT BUILD_CXX)
        message(FATAL_ERROR "Python wrapper requires building C library and C++ wrapper.")
        return ()
    endif ()
    add_subdirectory(${CMAKE_SOURCE_DIR}/python)
endif ()

if (BUILD_RUBY)
    if (NOT BUILD_CXX)
        message(FATAL_ERROR "Ruby wrapper requires building C library and C++ wrapper.")
        return ()
    endif ()
    add_subdirectory(${CMAKE_SOURCE_DIR}/ruby)
endif ()

if (BUILD_HASKELL)
    if (NOT BUILD_C)
        message(FATAL_ERROR "Haskell wrapper requires building C library.")
        return ()
    endif ()
    add_subdirectory(${CMAKE_SOURCE_DIR}/haskell)
endif ()

